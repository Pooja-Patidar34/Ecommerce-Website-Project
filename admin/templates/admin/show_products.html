{% extends "admin/base.html" %}
{% load static %}
{% block content %}
<div class="content-wrapper">
          <!-- Main content -->
          <section class="content">
                    <div class="card">
                              <div class="card-header bg-primary text-white">
                                        <h3 class="card-title">Categories List</h3>

                              </div>
                              <div class="card-body table-responsive">
                                        <table id="usersTable"
                                                  class="table table-striped table-bordered align-middle text-center">
                                                  {% if messages %}
                                                  <div class="container mt-2">
                                                            {% for message in messages %}
                                                            <div class="alert alert-{{ message.tags }} alert-dismissible fade show"
                                                                      role="alert">
                                                                      {{ message }}
                                                                      <button type="button" class="btn-close"
                                                                                data-bs-dismiss="alert"
                                                                                aria-label="Close"></button>
                                                            </div>
                                                            {% endfor %}
                                                  </div>
                                                  {% endif %}
                                                  <thead class="">
                                                            <tr>      
                                                                      <th>ID</th>
                                                                      <th>Name</th>
                                                                      <th>Category</th>
                                                                      <th>Description</th>
                                                                      <th>Price</th>
                                                                      <th>Stock</th>
                                                                      <th>Image</th>
                                                                      <th>Delete</th>
                                                                      <th>Update</th>
                                                            </tr>
                                                  </thead>
                                                  <tbody>
                                                            {% for p in products %}
                                                            <tr>
                                                                      <td>{{ p.id }}</td>
                                                                      <td>{{ p.name }}</td>
                                                                      <td>{{ p.category }}</td>
                                                                      <td>{{ p.description }}</td>
                                                                      <td>{{ p.price}}</td>
                                                                      <td>{{ p.stock }}</td>
                                                                      <td>
                                                                                {% if p.image %}
                                                                                <img src="{{p.image.url}}" alt="Image"
                                                                                          width="50px" height="50px">
                                                                                {% else %}
                                                                                No image
                                                                                {% endif %}
                                                                      </td>
                                                                      <td><a href="{% url 'delete_product' p.pk %}"
                                                                                          class="btn btn-danger"
                                                                                          onclick="return confirm('Are you sure you want to delete this product?');">
                                                                                          Delete
                                                                                </a>
                                                                      </td>
                                                                      <td><a href="{% url 'edit_product' p.pk %}" class="btn btn-success">
                                                                                Edit
                                                                      </a></td>
                                                            </tr>
                                                            {% endfor %}
                                                  </tbody>
                                        </table>
                                        <!-- Reusable Modal (only one, outside the loop) -->
                                        <div class="modal fade" id="confirmActionModal" tabindex="-1"
                                                  aria-hidden="true">
                                                  <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                      <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                          id="confirmActionTitle"></h5>
                                                                                <button type="button" class="btn-close"
                                                                                          data-bs-dismiss="modal"></button>
                                                                      </div>
                                                                      <div class="modal-body" id="confirmActionBody">
                                                                      </div>
                                                                      <div class="modal-footer">
                                                                                <button class="btn btn-secondary"
                                                                                          data-bs-dismiss="modal">Cancel</button>
                                                                                <a id="confirmActionBtn" href="#"
                                                                                          class="btn"></a>
                                                                      </div>
                                                            </div>
                                                  </div>
                                        </div>
                              </div>
                    </div>
          </section>
</div>
<!-- Auto remove after 10 seconds -->
<script>
          setTimeout(() => {
                    let alerts = document.querySelectorAll('.alert');
                    alerts.forEach(alert => {
                              let bsAlert = new bootstrap.Alert(alert);
                              bsAlert.close();
                    });
          }, 10000); // 10000ms = 10 seconds
</script>
{% endblock %}